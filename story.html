<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schrijfsel — Pieter Paul Tybbe</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<header id="main-header">
    <nav id="main-nav"></nav>
</header>

<main class="reader">
    <h1 id="story-title" style="text-align: center; margin-top: 2rem; font-family: serif; color: #ffd166;"></h1>
    
    <article id="text-container" class="literary-text"></article>

    <div class="like-section" style="text-align: center; padding: 40px 0; border-top: 1px solid rgba(255, 209, 102, 0.1); margin-top: 40px;">
        <p style="font-style: italic; font-size: 1rem; margin-bottom: 15px; font-family: serif; color: white;">
            Laat weten wat je ervan vond!
        </p>
        <div id="like-container"></div>
    </div>

<section class="reader-feedback" style="margin-bottom: 50px;">
    <h2 style="color: #ffd166; font-family: serif;">Reacties</h2>
    <p style="color: #f5f5f5; font-size: 0.9rem; font-style: italic; margin-bottom: 20px; opacity: 0.8;">
        Je kunt anoniem reageren. Vul simpelweg een naam in, een account is niet nodig. Panikeer niet als deze niet onmiddelijk verschijnt om een overspoeiling van bots tegen te gaan, worden reacties eerst computationeel approved. Dit kan even duren. 
    </p>

    <div id="cusdis_thread" 
         data-host="https://cusdis.com" 
         data-app-id="e2ce094f-0f93-4f5c-8ea9-f364505c967f" 
         data-lang="nl"
         data-theme="dark">
    </div>
</section>

    <div style="text-align: center; margin: 40px 0;">
        <a href="index.html" style="color: #ffd166; text-decoration: none; font-variant: small-caps; border: 1px solid #ffd166; padding: 10px 20px;">
            ← Terug naar alle verhalen
        </a>
    </div>
</main>

<script src="data/stories.js"></script>
<script src="js/story.js"></script>

<script src="https://unpkg.com/@lyket/widget@latest/dist/lyket.js?apiKey=pt_f4710b1a96a37346a7b9faedf0c733"></script>

<script>
    // 1. Navigatie laden
    fetch('nav.html').then(res => res.text()).then(data => {
        document.getElementById('main-nav').innerHTML = data;
    });

    // 2. Forceer Nederlandse taal voor Cusdis
    window.cusdis_lang = 'nl';

    // 3. Lyket Herstarten (voor de zekerheid als fallback)
    setTimeout(() => {
        if (window.lyket) {
            window.lyket.reinit();
            console.log("Lyket handmatig ververst");
        }
    }, 500);
</script>

<script async defer src="https://cusdis.com/js/cusdis.es.js"></script>

<script>
  // Cusdis hoogte automatisch aanpassen
  window.addEventListener('message', (e) => {
    if (e.data && e.data.type === 'cusdis:update-height') {
      const iframe = document.querySelector('#cusdis_thread iframe');
      if (iframe) {
        iframe.style.height = e.data.data + 'px';
      }
    }
  });
</script>
</body>
</html>
